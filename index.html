<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UIS Resource Hub</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="./assets/Uis.png?v=2" />
  <link rel="apple-touch-icon" href="./assets/Uis.png" />

  <!-- Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    /* replace with YOUR values if you recreate Supabase */
    window.SUPABASE_URL  = "https://cacfbgxkohkxexduzgxc.supabase.co";
    window.SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNhY2ZiZ3hrb2hreGV4ZHV6Z3hjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU4MjksImV4cCI6MjA3Mzk3MTgyOX0.-f2Hy2ZPexkD3mWbKAC1hti5pyGOd2HmfGFfDissqoc";
  </script>

  <!-- Use module so top-level await in app.js works -->
  <script type="module" src="app.js"></script>
</head>

<body>
  <!-- Header -->
  <header class="wrap">
    <h1>UIS Resource Hub</h1>
    <div class="sub">Find and share useful links for classes, tools, and campus life in UIS.</div>
    <div class="row mt-12">
      <input id="q" type="text" placeholder="Search by title, tag, or URL…" />
      <select id="cat"></select>
      <select id="sub"></select>
      <select id="tag"></select>

      <button id="addBtn" class="primary">＋ Add resource</button>

      <!-- Admin-only auth controls -->
      <button id="adminLogin" class="ghost">Admin sign in</button>
      <button id="logoutBtn" class="ghost" style="display:none">Sign out</button>
    </div>
  </header>

  <!-- Main -->
  <main class="wrap">
    <div class="pillbar" id="catChips"></div>
    <div id="count" class="muted small mtb-6-12"></div>

    <div id="empty" class="muted small" style="display:none;margin:10px 0;">
      No resources yet — be the first to submit!
    </div>

    <section class="grid" id="list"></section>
    <div class="pagination" id="pager"></div>
  </main>

  <!-- Add Resource Modal -->
  <div class="modal" id="modal" style="display:none">
    <div class="sheet">
      <h3>Suggest a resource</h3>

      <div class="row">
        <input id="titleI" type="text" placeholder="Title (e.g., Khan Academy – Algebra)" class="flex-2" />
        <input id="urlI" type="url" placeholder="URL (https://…)" class="flex-2" />
      </div>

      <div class="row mt-8">
        <select id="catI"></select>
        <input id="subI" type="text" placeholder="Subcategory (e.g., Algebra or ENG4U)" />
        <input id="tagsI" type="text" placeholder="Tags (comma separated)" />
      </div>

      <textarea id="descI" placeholder="Why is this helpful? Short description…"></textarea>

      <!-- ALWAYS-VISIBLE GUIDELINES (inline) -->
      <div class="policy-inline">
        <h4 class="small" style="margin:0 0 6px">School Resource Guidelines</h4>
        <ol class="small policy-list" style="margin:0; padding-left:1.1rem;">
          <li><strong>No materials from other schools</strong> (websites, branded YouTube channels, documents, slides) unless our administration has written permission.</li>
          <li>Only share resources that are <strong>publicly available</strong> and do not violate <strong>copyright</strong> or license terms.</li>
          <li><strong>No scans / uploads</strong> of textbooks, paid courseware, or paywalled content.</li>
          <li>Content must be <strong>appropriate for school</strong> (no profanity, hate, harassment, or unsafe material).</li>
          <li><strong>No personal or private information</strong> (yours or others’).</li>
          <li>Submissions may be <strong>reviewed by staff</strong> and removed if they don’t meet these rules.</li>
          <li>If you’re unsure, <strong>email</strong> <a href="mailto:hajilootivan8@gmail.com">hajilootivan8@gmail.com</a>.</li>
        </ol>
      </div>

      <!-- Consent checkbox (required to save) -->
      <label class="small" style="display:flex;align-items:center;gap:.5rem;margin-top:.6rem">
        <input type="checkbox" id="policyAgree" />
        I confirm this submission follows the School Resource Guidelines.
      </label>

      <div class="hr"></div>
      <div class="row justify-end">
        <button class="ghost" id="cancel">Cancel</button>
        <button class="primary" id="save">Save</button>
      </div>
      <div class="small muted">Posts are public. Only admin can delete.</div>
    </div>
  </div>

  <!-- School Resource Guidelines Modal (linked from footer) -->
  <div class="modal" id="policyModal" style="display:none">
    <div class="sheet">
      <h3>School Resource Guidelines</h3>
      <ol class="small policy-list" style="margin:8px 0 12px; padding-left:1.1rem;">
        <li><strong>No materials from other schools</strong> (websites, branded YouTube channels, documents, slides) unless our administration has written permission.</li>
        <li>Only share resources that are <strong>publicly available</strong> and do not violate <strong>copyright</strong> or license terms.</li>
        <li><strong>No scans / uploads</strong> of textbooks, paid courseware, or paywalled content.</li>
        <li>Content must be <strong>appropriate for school</strong> (no profanity, hate, harassment, or unsafe material).</li>
        <li><strong>No personal or private information</strong> (yours or others’).</li>
        <li>Submissions may be <strong>reviewed by staff</strong> and removed if they don’t meet these rules.</li>
        <li>If you’re unsure, <strong>email</strong> <a href="mailto:hajilootivan8@gmail.com">hajilootivan8@gmail.com</a>.</li>
      </ol>
      <div class="row justify-end">
        <button class="ghost" id="policyClose">Close</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="wrap footer-inner">
      <span>Built by students for <strong>UIS</strong></span>
      <span class="dot">•</span>
      <a href="#" id="feedbackLink" class="link">Give feedback</a>
      <span class="dot">•</span>
      <a href="#" id="policyFooterLink" class="link">Guidelines</a>
      <span class="dot">•</span>
      <span class="muted small">Student-submitted; reviewed by staff.</span>
      <span class="dot">•</span>
      <span class="version">v1.0</span>
    </div>
  </footer>
</body>
</html>
